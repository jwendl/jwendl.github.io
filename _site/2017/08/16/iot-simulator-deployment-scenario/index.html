<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>IoT Simulator Deployment Scenario &#8211; Justin Wendlandt's Blog</title> <meta name="description" content="The goal of this Azure Resource Manager template is to build a place where anyone who is interested in simulating load on Azure IoT Hubs utilizing their own data is possible. This is done by creating an environment where containers that have the application specific code can be replicated at scale and allow semi-realistic data to flow through the IoT Hub and eventually on to any endpoints specified in the IoT Hub.­This Azure Resource Manager template builds out an Azure Service Fabric cluster with an accompanying Azure IoT Hub that has example hubs and routes. The Azure Service Fabric cluster has a Virtual Machine Scale Set with Windows server hosts that can support Windows Containers (2016-Datacenter-with-containers image sku).To get the fully combined template, please go to this GitHub RepositoryService Fabric with Windows ContainersTo enable Azure Service Fabric with Windows Containers, there are three properties in our Azure Resource Manager template that we need to ensure that we have enabled. &quot;vmImageSku&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;defaultValue&quot;: &quot;2016-Datacenter-with-Containers&quot;, &quot;metadata&quot;: { &quot;description&quot;: &quot;VM image SKU&quot; } }, ... &quot;properties&quot;: { &quot;clusterCodeVersion&quot;: &quot;255.255.5718.255&quot;, ... &quot;addonFeatures&quot;: [ &quot;DnsService&quot; ], } ...The full example is available at GitHubIoT Hubs with Endpoints and Routes.To build out an IoT Hub with endpoints and routes, there are two properties that need to be filled out. &quot;routing&quot;: { &quot;endpoints&quot;: { &quot;serviceBusQueues&quot;: [], &quot;serviceBusTopics&quot;: [], &quot;eventHubs&quot;: [and &quot;routing&quot;: { &quot;routes&quot;: [ {The full example is available at GitHubNote: if you have multiple properties (for instance “routing”:) in your Azure Resource Manager template, it will use the last property declared as what is deployed out to Azure."> <meta name="keywords" content="iot, simulator"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="halve.png"> <meta name="twitter:title" content="IoT Simulator Deployment Scenario"> <meta name="twitter:description" content="The goal of this Azure Resource Manager template is to build a place where anyone who is interested in simulating load on Azure IoT Hubs utilizing their own data is possible. This is done by creating an environment where containers that have the application specific code can be replicated at scale and allow semi-realistic data to flow through the IoT Hub and eventually on to any endpoints specified in the IoT Hub.­This Azure Resource Manager template builds out an Azure Service Fabric cluster with an accompanying Azure IoT Hub that has example hubs and routes. The Azure Service Fabric cluster has a Virtual Machine Scale Set with Windows server hosts that can support Windows Containers (2016-Datacenter-with-containers image sku).To get the fully combined template, please go to this GitHub RepositoryService Fabric with Windows ContainersTo enable Azure Service Fabric with Windows Containers, there are three properties in our Azure Resource Manager template that we need to ensure that we have enabled. &quot;vmImageSku&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;defaultValue&quot;: &quot;2016-Datacenter-with-Containers&quot;, &quot;metadata&quot;: { &quot;description&quot;: &quot;VM image SKU&quot; } }, ... &quot;properties&quot;: { &quot;clusterCodeVersion&quot;: &quot;255.255.5718.255&quot;, ... &quot;addonFeatures&quot;: [ &quot;DnsService&quot; ], } ...The full example is available at GitHubIoT Hubs with Endpoints and Routes.To build out an IoT Hub with endpoints and routes, there are two properties that need to be filled out. &quot;routing&quot;: { &quot;endpoints&quot;: { &quot;serviceBusQueues&quot;: [], &quot;serviceBusTopics&quot;: [], &quot;eventHubs&quot;: [and &quot;routing&quot;: { &quot;routes&quot;: [ {The full example is available at GitHubNote: if you have multiple properties (for instance “routing”:) in your Azure Resource Manager template, it will use the last property declared as what is deployed out to Azure."> <meta name="twitter:site" content="@jwendl"> <meta name="twitter:creator" content="@jwendl"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="IoT Simulator Deployment Scenario"> <meta property="og:description" content="The goal of this Azure Resource Manager template is to build a place where anyone who is interested in simulating load on Azure IoT Hubs utilizing their own data is possible. This is done by creating an environment where containers that have the application specific code can be replicated at scale and allow semi-realistic data to flow through the IoT Hub and eventually on to any endpoints specified in the IoT Hub.­This Azure Resource Manager template builds out an Azure Service Fabric cluster with an accompanying Azure IoT Hub that has example hubs and routes. The Azure Service Fabric cluster has a Virtual Machine Scale Set with Windows server hosts that can support Windows Containers (2016-Datacenter-with-containers image sku).To get the fully combined template, please go to this GitHub RepositoryService Fabric with Windows ContainersTo enable Azure Service Fabric with Windows Containers, there are three properties in our Azure Resource Manager template that we need to ensure that we have enabled. &quot;vmImageSku&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;defaultValue&quot;: &quot;2016-Datacenter-with-Containers&quot;, &quot;metadata&quot;: { &quot;description&quot;: &quot;VM image SKU&quot; } }, ... &quot;properties&quot;: { &quot;clusterCodeVersion&quot;: &quot;255.255.5718.255&quot;, ... &quot;addonFeatures&quot;: [ &quot;DnsService&quot; ], } ...The full example is available at GitHubIoT Hubs with Endpoints and Routes.To build out an IoT Hub with endpoints and routes, there are two properties that need to be filled out. &quot;routing&quot;: { &quot;endpoints&quot;: { &quot;serviceBusQueues&quot;: [], &quot;serviceBusTopics&quot;: [], &quot;eventHubs&quot;: [and &quot;routing&quot;: { &quot;routes&quot;: [ {The full example is available at GitHubNote: if you have multiple properties (for instance “routing”:) in your Azure Resource Manager template, it will use the last property declared as what is deployed out to Azure."> <meta property="og:url" content="http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/"> <meta property="og:site_name" content="Justin Wendlandt's Blog"> <meta property="og:image" content="http://localhost:4000/images/halve.png"> <link rel="canonical" href="http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Justin Wendlandt's Blog" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/unsplash-gallery-image-3.jpg) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/unsplash-image-10.jpg) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(http://localhost:4000/images/home.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left"> <div class="content"> <a href="http://localhost:4000" class="logo"><img src="http://localhost:4000/images/halve.png"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">IoT Simulator Deployment Scenario </h1> <ul class="tags"> <li><a href="http://localhost:4000/tags#iot">iot</a></li> <li><a href="http://localhost:4000/tags#simulator">simulator</a></li> </ul> <div class="section-line reverse"><a href="http://localhost:4000/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="http://localhost:4000/posts.html" title="posts" class="posts-menu-icon"></a> <a title="http://localhost:4000/projects" class="projects-menu-icon"> <span></span> </a> <div class="inner-post content"> <div class="date-highlight">16 Aug 2017</div> <p>The goal of this Azure Resource Manager template is to build a place where anyone who is interested in simulating load on Azure IoT Hubs utilizing their own data is possible. This is done by creating an environment where containers that have the application specific code can be replicated at scale and allow semi-realistic data to flow through the IoT Hub and eventually on to any endpoints specified in the IoT Hub. ­</p> <p>This Azure Resource Manager template builds out an Azure Service Fabric cluster with an accompanying Azure IoT Hub that has example hubs and routes. The Azure Service Fabric cluster has a Virtual Machine Scale Set with Windows server hosts that can support Windows Containers (2016-Datacenter-with-containers image sku).</p> <p>To get the fully combined template, please go to this <a href="https://github.com/Azure/azure-quickstart-templates">GitHub Repository</a></p> <h2 id="service-fabric-with-windows-containers">Service Fabric with Windows Containers</h2> <p>To enable Azure Service Fabric with Windows Containers, there are three properties in our Azure Resource Manager template that we need to ensure that we have enabled.</p> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="w">    </span><span class="s2">"vmImageSku"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"defaultValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-Datacenter-with-Containers"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VM image SKU"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="err">,</span><span class="w">

    </span><span class="err">...</span><span class="w">

    </span><span class="s2">"properties"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"clusterCodeVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"255.255.5718.255"</span><span class="p">,</span><span class="w">

        </span><span class="err">...</span><span class="w">

        </span><span class="nt">"addonFeatures"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"DnsService"</span><span class="w">
        </span><span class="p">],</span><span class="w">
    </span><span class="err">}</span><span class="w">

    </span><span class="err">...</span></code></pre></figure> <p>The full example is available at <a href="https://github.com/Azure/azure-quickstart-templates">GitHub</a></p> <h2 id="iot-hubs-with-endpoints-and-routes">IoT Hubs with Endpoints and Routes.</h2> <p>To build out an IoT Hub with endpoints and routes, there are two properties that need to be filled out.</p> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="w">        </span><span class="s2">"routing"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"serviceBusQueues"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nt">"serviceBusTopics"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nt">"eventHubs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span></code></pre></figure> <p>and</p> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="w">        </span><span class="s2">"routing"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span></code></pre></figure> <p>The full example is available at <a href="https://github.com/Azure/azure-quickstart-templates">GitHub</a></p> <p><strong>Note</strong>: if you have multiple properties (for instance “routing”:) in your Azure Resource Manager template, it will use the last property declared as what is deployed out to Azure.</p> <br /> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/2017/08/16/iot-simulator-deployment-scenario/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> <div id="page_uri" value="/2017/08/16/iot-simulator-deployment-scenario/" style="display: none;">&nbsp;</div> <div id="page_title" value="IoT Simulator Deployment Scenario" style="display: none;">&nbsp;</div> <div id="disqus_thread"></div> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <script type="text/javascript" src="/assets/js/disqus.js"></script> <nav class="pagination"> <a href="http://localhost:4000/2017/08/15/docker-handy-commands/" class="pagination_pager" title="Handy Docker Commands ">previous</a> <a href="http://localhost:4000/2017/08/17/using-expect-bash/" class="pagination_pager" title="Using Expect with Bash ">next</a> </nav> </div> </div> <!-- JS --> <script src="http://localhost:4000/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://taylantatli.me/Halve/images/halve-home-image.png) center center no-repeat;"> <a href="http://taylantatli.me/Halve" class="inactive" target="_blank" rel="nofollow external"> <span> Halve Jekyll Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://cloud.githubusercontent.com/assets/754514/14509720/61c61058-01d6-11e6-93ab-0918515ecd56.png) center center no-repeat;"> <a href="http://taylantatli.me/Moon" target="_blank" rel="nofollow external"> <span> Moon Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Ramme/master/assets/img/screenshot-post.png) center center no-repeat;"> <a href="http://taylantatli.me/Ramme" target="_blank" rel="nofollow external"> <span> Ramme Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Daisy-Pelican-Theme/master/Preview-1.png) center center no-repeat;"> <a href="http://taylantatli.me/Daisy-Pelican-Theme/" target="_blank" rel="nofollow external"> <span> Daisy Pelican Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Block-Icon-Theme/master/Preview.png) center center no-repeat;"> <a href="https://github.com/TaylanTatli/Block-Icon-Theme" class="inactive" target="_blank" rel="nofollow external"> <span> Block Icon Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/StartPage/master/preview.png) center center no-repeat;"> <a href="http://taylantatli.me/StartPage/" class="inactive" target="_blank" rel="nofollow external"> <span> Start Page <br><em>in progress</em> </span> </a> </li> </ul> </div> </body> </html>
