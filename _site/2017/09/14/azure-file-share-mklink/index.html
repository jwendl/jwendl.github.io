<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>Azure File Share and mklink &#8211; Justin Wendlandt's Blog</title> <meta name="description" content="Azure File Share and mklinkOne situation we ran into was figuring out how to store files to be shared across multiple virtual machines inside docker containers on an Azure VM. To solve for this problem, we created an Azure File Share and mounted it using net use. Then we used mklink to point a folder in the container to the file share.Creating an Azure File Share is fairly simple. First create the Azure Storage Account using the information below.Then the next step is to go and create a new file share.From that point we will the command net use to setup the share to a physical drive letter.net use F: \\jwminecraftshare.file.core.windows.net\share /u:AZURE\jwminecraftshare [key]Then the next command below will link a local path to that drive share.mklink /d &quot;c:\Data&quot; &quot;\\jwminecraftshare.file.core.windows.net\share&quot; From that point, inside the container we should be able to save files to c:\data and have it save out to the Azure File Service."> <meta name="keywords" content="dos, docker"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="profile.jpg"> <meta name="twitter:title" content="Azure File Share and mklink"> <meta name="twitter:description" content="Azure File Share and mklinkOne situation we ran into was figuring out how to store files to be shared across multiple virtual machines inside docker containers on an Azure VM. To solve for this problem, we created an Azure File Share and mounted it using net use. Then we used mklink to point a folder in the container to the file share.Creating an Azure File Share is fairly simple. First create the Azure Storage Account using the information below.Then the next step is to go and create a new file share.From that point we will the command net use to setup the share to a physical drive letter.net use F: \\jwminecraftshare.file.core.windows.net\share /u:AZURE\jwminecraftshare [key]Then the next command below will link a local path to that drive share.mklink /d &quot;c:\Data&quot; &quot;\\jwminecraftshare.file.core.windows.net\share&quot; From that point, inside the container we should be able to save files to c:\data and have it save out to the Azure File Service."> <meta name="twitter:site" content="@jwendl"> <meta name="twitter:creator" content="@jwendl"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Azure File Share and mklink"> <meta property="og:description" content="Azure File Share and mklinkOne situation we ran into was figuring out how to store files to be shared across multiple virtual machines inside docker containers on an Azure VM. To solve for this problem, we created an Azure File Share and mounted it using net use. Then we used mklink to point a folder in the container to the file share.Creating an Azure File Share is fairly simple. First create the Azure Storage Account using the information below.Then the next step is to go and create a new file share.From that point we will the command net use to setup the share to a physical drive letter.net use F: \\jwminecraftshare.file.core.windows.net\share /u:AZURE\jwminecraftshare [key]Then the next command below will link a local path to that drive share.mklink /d &quot;c:\Data&quot; &quot;\\jwminecraftshare.file.core.windows.net\share&quot; From that point, inside the container we should be able to save files to c:\data and have it save out to the Azure File Service."> <meta property="og:url" content="http://localhost:4000/2017/09/14/azure-file-share-mklink/"> <meta property="og:site_name" content="Justin Wendlandt's Blog"> <meta property="og:image" content="http://localhost:4000/images/profile.jpg"> <link rel="canonical" href="http://localhost:4000/2017/09/14/azure-file-share-mklink/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/unsplash-gallery-image-3.jpg) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/unsplash-image-10.jpg) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(http://localhost:4000/images/home.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left"> <div class="content"> <a href="http://localhost:4000" class="logo"><img src="http://localhost:4000/images/profile.jpg"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">Azure File Share and mklink </h1> <ul class="tags"> <li><a href="http://localhost:4000/tags#dos">dos</a></li> <li><a href="http://localhost:4000/tags#docker">docker</a></li> </ul> <div class="section-line reverse"><a href="http://localhost:4000/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/2017/09/14/azure-file-share-mklink/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2017/09/14/azure-file-share-mklink/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/2017/09/14/azure-file-share-mklink/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="http://localhost:4000/posts.html" title="posts" class="posts-menu-icon"></a> <a title="http://localhost:4000/projects" class="projects-menu-icon"> <span></span> </a> <div class="inner-post content"> <div class="date-highlight">14 Sep 2017</div> <h1 id="azure-file-share-and-mklink">Azure File Share and mklink</h1> <p>One situation we ran into was figuring out how to store files to be shared across multiple virtual machines inside docker containers on an Azure VM. To solve for this problem, we created an Azure File Share and mounted it using net use. Then we used mklink to point a folder in the container to the file share.</p> <p>Creating an Azure File Share is fairly simple. First create the Azure Storage Account using the information below.</p> <p><img src="/images/StorageAccount.png" alt="Storage Account Steps" /></p> <p>Then the next step is to go and create a new file share.</p> <p><img src="/images/FileService.png" alt="File Share Steps" /></p> <p>From that point we will the command net use to setup the share to a physical drive letter.</p> <div class="language-sh highlighter-rouge"><pre class="highlight"><code>net use F: <span class="se">\\</span>jwminecraftshare.file.core.windows.net<span class="se">\s</span>hare /u:AZURE<span class="se">\j</span>wminecraftshare <span class="o">[</span>key]
</code></pre></div> <p>Then the next command below will link a local path to that drive share.</p> <div class="language-sh highlighter-rouge"><pre class="highlight"><code>mklink /d <span class="s2">"c:</span><span class="se">\D</span><span class="s2">ata"</span> <span class="s2">"</span><span class="se">\\</span><span class="s2">jwminecraftshare.file.core.windows.net</span><span class="se">\s</span><span class="s2">hare"</span> 
</code></pre></div> <p>From that point, inside the container we should be able to save files to c:\data and have it save out to the Azure File Service.</p> <br /> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/2017/09/14/azure-file-share-mklink/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2017/09/14/azure-file-share-mklink/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/2017/09/14/azure-file-share-mklink/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> <div id="page_uri" value="/2017/09/14/azure-file-share-mklink/" style="display: none;">&nbsp;</div> <div id="page_title" value="Azure File Share and mklink" style="display: none;">&nbsp;</div> <div id="disqus_thread"></div> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <script type="text/javascript" src="/assets/js/disqus.js"></script> <nav class="pagination"> <a href="http://localhost:4000/2017/09/14/bash-on-windows-fonts/" class="pagination_pager" title="Bash on Windows Font Issues ">previous</a> <a href="http://localhost:4000/2017/10/01/useful-visual-studio-extensions/" class="pagination_pager" title="Useful Visual Studio Extensions ">next</a> </nav> </div> </div> <!-- JS --> <script src="http://localhost:4000/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://taylantatli.me/Halve/images/halve-home-image.png) center center no-repeat;"> <a href="http://taylantatli.me/Halve" class="inactive" target="_blank" rel="nofollow external"> <span> Halve Jekyll Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://cloud.githubusercontent.com/assets/754514/14509720/61c61058-01d6-11e6-93ab-0918515ecd56.png) center center no-repeat;"> <a href="http://taylantatli.me/Moon" target="_blank" rel="nofollow external"> <span> Moon Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Ramme/master/assets/img/screenshot-post.png) center center no-repeat;"> <a href="http://taylantatli.me/Ramme" target="_blank" rel="nofollow external"> <span> Ramme Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Daisy-Pelican-Theme/master/Preview-1.png) center center no-repeat;"> <a href="http://taylantatli.me/Daisy-Pelican-Theme/" target="_blank" rel="nofollow external"> <span> Daisy Pelican Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Block-Icon-Theme/master/Preview.png) center center no-repeat;"> <a href="https://github.com/TaylanTatli/Block-Icon-Theme" class="inactive" target="_blank" rel="nofollow external"> <span> Block Icon Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/StartPage/master/preview.png) center center no-repeat;"> <a href="http://taylantatli.me/StartPage/" class="inactive" target="_blank" rel="nofollow external"> <span> Start Page <br><em>in progress</em> </span> </a> </li> </ul> </div> </body> </html>
